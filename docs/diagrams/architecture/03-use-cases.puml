@startuml Use Cases
skinparam shadowing false
skinparam ActorBackgroundColor #E6F3FF
skinparam ActorBorderColor #146EB4
skinparam UsecaseBackgroundColor white
skinparam UsecaseBorderColor #232F3E
skinparam UsecaseBorderThickness 2
skinparam ArrowThickness 1
skinparam packageStyle rectangle

title Use Cases - Project Cost Control System\nRole-Based Access Control (Inheritance Model)

left to right direction

' Actors with inheritance (Admin > PM > Viewer)
actor "Viewer" as viewer #F5F5F5
actor "Project\nManager" as pm #E6F3FF
actor "Admin" as admin #FFE6CC

' Role inheritance
admin --|> pm : inherits
pm --|> viewer : inherits

rectangle "Project Cost Control System" {

  package "Authentication" #FFE6CC {
    (Login Email/Password) as UC1
    (Login Microsoft SSO) as UC2
    (Setup MFA) as UC3
    (Logout) as UC4
  }

  package "View Data (Read-Only)" #F5F5F5 {
    (View Projects) as UC8
    (View Project Details) as UC9
    (View Budget) as UC12
    (View Employee Roster) as UC17
    (View Time Entries) as UC20
    (View Actuals) as UC24
    (View Projections) as UC28
    (View Dashboard) as UC30
    (Export Reports / PDF) as UC33
  }

  package "Manage Project Data" #E6F3FF {
    (Edit Project) as UC5
    (Create / Edit Budget Lines) as UC10
    (Add / Edit Employees) as UC14
    (Enter / Edit Time) as UC18
    (Enter / Edit Actuals) as UC22
    (Create / Edit Projections) as UC26
    (Change Status:\nACTIVE <-> ON_HOLD) as UC_STATUS_PM
  }

  package "Administration" #FFE6E6 {
    (Create Project) as UC6
    (Delete Project) as UC7
    (Manage Users) as UC34
    (Manage Cost Codes) as UC35
    (Manage Labor Rates) as UC36
    (Manage Equipment Catalog) as UC_EQUIP
    (Change Status:\nCOMPLETED / CANCELLED) as UC_STATUS_ADMIN
    (View Audit Logs) as UC37
  }
}

' Viewer connects to auth + read-only
viewer --> UC1
viewer --> UC2
viewer --> UC3
viewer --> UC4
viewer --> UC8
viewer --> UC9
viewer --> UC12
viewer --> UC17
viewer --> UC20
viewer --> UC24
viewer --> UC28
viewer --> UC30
viewer --> UC33

' PM connects ONLY to write operations (reads inherited from Viewer)
pm --> UC5
pm --> UC10
pm --> UC14
pm --> UC18
pm --> UC22
pm --> UC26
pm --> UC_STATUS_PM

' Admin connects ONLY to admin operations (reads + writes inherited)
admin --> UC6
admin --> UC7
admin --> UC34
admin --> UC35
admin --> UC36
admin --> UC_EQUIP
admin --> UC_STATUS_ADMIN
admin --> UC37

note right of UC3
  MFA required
  for Admins
end note

note right of UC_STATUS_PM
  PM can only toggle
  ACTIVE <-> ON_HOLD
end note

note right of UC_STATUS_ADMIN
  Admin can set any status
  including COMPLETED,
  CANCELLED, and reactivate
end note

legend bottom
  <b>Role Inheritance</b>
  Admin inherits all PM permissions, PM inherits all Viewer permissions.
  Each actor only shows connections to its OWN level of access.
  
  |= Role |= Own Permissions |= Inherited From |
  | Viewer | Auth + Read-only access | - |
  | PM | Edit project data, ACTIVE<->ON_HOLD | Viewer |
  | Admin | Create/Delete project, User mgmt, Reference data, All status changes | PM + Viewer |
  
  <b>Resource Scope:</b>
  PM sees only assigned projects. Admin sees all projects.
endlegend

@enduml
